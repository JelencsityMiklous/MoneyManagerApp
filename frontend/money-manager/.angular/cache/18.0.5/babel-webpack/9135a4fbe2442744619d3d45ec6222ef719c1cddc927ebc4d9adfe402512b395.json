{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let WalletService = /*#__PURE__*/(() => {\n  class WalletService {\n    constructor() {\n      this.storageKey = 'wallet_data';\n      this.walletSubject = new BehaviorSubject(this.loadWallet());\n      this.wallet$ = this.walletSubject.asObservable();\n    }\n    loadWallet() {\n      const saved = localStorage.getItem(this.storageKey);\n      if (saved) return JSON.parse(saved);\n      // új wallet random kezdő összeggel\n      const startBalance = Math.floor(1000 + Math.random() * 9000);\n      const wallet = {\n        balance: startBalance,\n        income: startBalance,\n        expense: 0,\n        transactions: [{\n          id: 1,\n          type: 'income',\n          amount: startBalance,\n          date: new Date().toISOString()\n        }]\n      };\n      localStorage.setItem(this.storageKey, JSON.stringify(wallet));\n      return wallet;\n    }\n    save(wallet) {\n      localStorage.setItem(this.storageKey, JSON.stringify(wallet));\n      this.walletSubject.next(wallet);\n    }\n    getWallet() {\n      return this.walletSubject.value;\n    }\n    addIncome(amount) {\n      const w = this.getWallet();\n      const tx = {\n        id: Date.now(),\n        type: 'income',\n        amount,\n        date: new Date().toISOString()\n      };\n      w.balance += amount;\n      w.income += amount;\n      w.transactions.push(tx);\n      this.save(w);\n    }\n    addExpense(amount) {\n      const w = this.getWallet();\n      const tx = {\n        id: Date.now(),\n        type: 'expense',\n        amount,\n        date: new Date().toISOString()\n      };\n      w.balance -= amount;\n      w.expense += amount;\n      w.transactions.push(tx);\n      this.save(w);\n    }\n    resetWallet() {\n      localStorage.removeItem(this.storageKey);\n      this.walletSubject.next(this.loadWallet());\n    }\n    static {\n      this.ɵfac = function WalletService_Factory(t) {\n        return new (t || WalletService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: WalletService,\n        factory: WalletService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return WalletService;\n})();","map":{"version":3,"names":["BehaviorSubject","WalletService","constructor","storageKey","walletSubject","loadWallet","wallet$","asObservable","saved","localStorage","getItem","JSON","parse","startBalance","Math","floor","random","wallet","balance","income","expense","transactions","id","type","amount","date","Date","toISOString","setItem","stringify","save","next","getWallet","value","addIncome","w","tx","now","push","addExpense","resetWallet","removeItem","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Attila\\mkoneymanagerapp\\MoneyManagerApp\\frontend\\money-manager\\src\\app\\services\\wallet.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nexport interface Transaction {\r\n  id: number;\r\n  type: 'income' | 'expense';\r\n  amount: number;\r\n  date: string;\r\n}\r\n\r\nexport interface Wallet {\r\n  balance: number;\r\n  income: number;\r\n  expense: number;\r\n  transactions: Transaction[];\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class WalletService {\r\n  private storageKey = 'wallet_data';\r\n  private walletSubject = new BehaviorSubject<Wallet>(this.loadWallet());\r\n  wallet$ = this.walletSubject.asObservable();\r\n\r\n  constructor() {}\r\n\r\n  private loadWallet(): Wallet {\r\n    const saved = localStorage.getItem(this.storageKey);\r\n    if (saved) return JSON.parse(saved);\r\n\r\n    // új wallet random kezdő összeggel\r\n    const startBalance = Math.floor(1000 + Math.random() * 9000);\r\n    const wallet: Wallet = {\r\n      balance: startBalance,\r\n      income: startBalance,\r\n      expense: 0,\r\n      transactions: [{\r\n        id: 1,\r\n        type: 'income',\r\n        amount: startBalance,\r\n        date: new Date().toISOString(),\r\n      }]\r\n    };\r\n    localStorage.setItem(this.storageKey, JSON.stringify(wallet));\r\n    return wallet;\r\n  }\r\n\r\n  private save(wallet: Wallet) {\r\n    localStorage.setItem(this.storageKey, JSON.stringify(wallet));\r\n    this.walletSubject.next(wallet);\r\n  }\r\n\r\n  getWallet(): Wallet {\r\n    return this.walletSubject.value;\r\n  }\r\n\r\n  addIncome(amount: number) {\r\n    const w = this.getWallet();\r\n    const tx: Transaction = {\r\n      id: Date.now(),\r\n      type: 'income',\r\n      amount,\r\n      date: new Date().toISOString()\r\n    };\r\n    w.balance += amount;\r\n    w.income += amount;\r\n    w.transactions.push(tx);\r\n    this.save(w);\r\n  }\r\n\r\n  addExpense(amount: number) {\r\n    const w = this.getWallet();\r\n    const tx: Transaction = {\r\n      id: Date.now(),\r\n      type: 'expense',\r\n      amount,\r\n      date: new Date().toISOString()\r\n    };\r\n    w.balance -= amount;\r\n    w.expense += amount;\r\n    w.transactions.push(tx);\r\n    this.save(w);\r\n  }\r\n\r\n  resetWallet() {\r\n    localStorage.removeItem(this.storageKey);\r\n    this.walletSubject.next(this.loadWallet());\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}