{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor(router) {\n      this.router = router;\n      this.usersKey = 'users';\n      this.currentKey = 'currentUser';\n      this.ensureAdmin();\n    }\n    // ✅ Ha nincs admin, automatikusan létrehozza\n    ensureAdmin() {\n      const users = this.getAllUsers();\n      if (!users.find(u => u.email === 'admin@admin.com')) {\n        users.push({\n          id: 1,\n          name: 'Admin',\n          email: 'admin@admin.com',\n          password: 'admin123',\n          isAdmin: true,\n          wallet: {\n            balance: 100000,\n            income: 0,\n            expense: 0\n          }\n        });\n        localStorage.setItem(this.usersKey, JSON.stringify(users));\n      }\n    }\n    getAllUsers() {\n      const raw = localStorage.getItem(this.usersKey);\n      return raw ? JSON.parse(raw) : [];\n    }\n    saveUsers(users) {\n      localStorage.setItem(this.usersKey, JSON.stringify(users));\n    }\n    getCurrentUser() {\n      const raw = localStorage.getItem(this.currentKey);\n      return raw ? JSON.parse(raw) : null;\n    }\n    // ✅ bejelentkezés\n    login(email, password) {\n      const users = this.getAllUsers();\n      const user = users.find(u => u.email === email && u.password === password);\n      if (user) {\n        localStorage.setItem(this.currentKey, JSON.stringify(user));\n        return {\n          success: true,\n          message: 'Sikeres bejelentkezés!'\n        };\n      }\n      return {\n        success: false,\n        message: 'Hibás email vagy jelszó!'\n      };\n    }\n    // ✅ regisztráció random kezdő pénzzel\n    register(name, email, password) {\n      const users = this.getAllUsers();\n      if (users.find(u => u.email === email)) {\n        return {\n          success: false,\n          message: 'Ez az email már regisztrálva van.'\n        };\n      }\n      const randomBalance = Math.floor(Math.random() * 20000) + 1000;\n      const user = {\n        id: users.length + 1,\n        name,\n        email,\n        password: '',\n        isAdmin: false,\n        wallet: {\n          balance: 0,\n          income: 0,\n          expense: 0\n        }\n      };\n    }\n    static {\n      this.ɵfac = function AuthService_Factory(t) {\n        return new (t || AuthService)(i0.ɵɵinject(i1.Router));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: AuthService,\n        factory: AuthService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return AuthService;\n})();","map":{"version":3,"names":["AuthService","constructor","router","usersKey","currentKey","ensureAdmin","users","getAllUsers","find","u","email","push","id","name","password","isAdmin","wallet","balance","income","expense","localStorage","setItem","JSON","stringify","raw","getItem","parse","saveUsers","getCurrentUser","login","user","success","message","register","randomBalance","Math","floor","random","length","i0","ɵɵinject","i1","Router","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Attila\\mkoneymanagerapp\\MoneyManagerApp\\frontend\\money-manager\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nexport interface User {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n  isAdmin: boolean;\r\n  wallet: {\r\n    balance: number;\r\n    income: number;\r\n    expense: number;\r\n  };\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  private readonly usersKey = 'users';\r\n  private readonly currentKey = 'currentUser';\r\n\r\n  constructor(private router: Router) {\r\n    this.ensureAdmin();\r\n  }\r\n\r\n  // ✅ Ha nincs admin, automatikusan létrehozza\r\n  private ensureAdmin() {\r\n    const users = this.getAllUsers();\r\n    if (!users.find(u => u.email === 'admin@admin.com')) {\r\n      users.push({\r\n        id: 1,\r\n        name: 'Admin',\r\n        email: 'admin@admin.com',\r\n        password: 'admin123',\r\n        isAdmin: true,\r\n        wallet: { balance: 100000, income: 0, expense: 0 }\r\n      });\r\n      localStorage.setItem(this.usersKey, JSON.stringify(users));\r\n    }\r\n  }\r\n\r\n  private getAllUsers(): User[] {\r\n    const raw = localStorage.getItem(this.usersKey);\r\n    return raw ? JSON.parse(raw) : [];\r\n  }\r\n\r\n  private saveUsers(users: User[]) {\r\n    localStorage.setItem(this.usersKey, JSON.stringify(users));\r\n  }\r\n\r\n  getCurrentUser(): User | null {\r\n    const raw = localStorage.getItem(this.currentKey);\r\n    return raw ? JSON.parse(raw) : null;\r\n  }\r\n\r\n  // ✅ bejelentkezés\r\n  login(email: string, password: string) {\r\n    const users = this.getAllUsers();\r\n    const user = users.find(u => u.email === email && u.password === password);\r\n    if (user) {\r\n      localStorage.setItem(this.currentKey, JSON.stringify(user));\r\n      return { success: true, message: 'Sikeres bejelentkezés!' };\r\n    }\r\n    return { success: false, message: 'Hibás email vagy jelszó!' };\r\n  }\r\n\r\n  // ✅ regisztráció random kezdő pénzzel\r\n  register(name: string, email: string, password: string) {\r\n    const users = this.getAllUsers();\r\n    if (users.find(u => u.email === email)) {\r\n      return { success: false, message: 'Ez az email már regisztrálva van.' };\r\n    }\r\n\r\n    const randomBalance = Math.floor(Math.random() * 20000) + 1000;\r\n    const user: User = {\r\n      id: users.length + 1,\r\n      name,\r\n      email,\r\n      password: '',\r\n      isAdmin: false,\r\n      wallet: {\r\n        balance: 0,\r\n        income: 0,\r\n        expense: 0\r\n      }\r\n    }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}