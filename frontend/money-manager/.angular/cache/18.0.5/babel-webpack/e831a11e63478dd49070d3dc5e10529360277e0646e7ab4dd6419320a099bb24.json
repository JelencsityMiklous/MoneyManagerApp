{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor(router) {\n      this.router = router;\n      this.storageKey = 'users';\n      this.currentKey = 'currentUser';\n    }\n    loadUsers() {\n      return JSON.parse(localStorage.getItem(this.storageKey) || '[]');\n    }\n    saveUsers(users) {\n      localStorage.setItem(this.storageKey, JSON.stringify(users));\n    }\n    register(username, password) {\n      const users = this.loadUsers();\n      if (users.some(u => u.username === username)) {\n        throw new Error('A felhasználó már létezik!');\n      }\n      const isAdmin = username.toLowerCase() === 'admin';\n      users.push({\n        username,\n        password,\n        isAdmin\n      });\n      this.saveUsers(users);\n    }\n    login(username, password) {\n      const users = this.loadUsers();\n      const user = users.find(u => u.username === username && u.password === password);\n      if (!user) throw new Error('Hibás felhasználónév vagy jelszó');\n      localStorage.setItem(this.currentKey, JSON.stringify(user));\n    }\n    logout() {\n      localStorage.removeItem(this.currentKey);\n      this.router.navigate(['/login']);\n    }\n    getCurrentUser() {\n      const data = localStorage.getItem(this.currentKey);\n      return data ? JSON.parse(data) : null;\n    }\n    isAdmin() {\n      const user = this.getCurrentUser();\n      return !!user?.isAdmin;\n    }\n    getAllUsers() {\n      return this.loadUsers();\n    }\n    static {\n      this.ɵfac = function AuthService_Factory(t) {\n        return new (t || AuthService)(i0.ɵɵinject(i1.Router));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: AuthService,\n        factory: AuthService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return AuthService;\n})();","map":{"version":3,"names":["AuthService","constructor","router","storageKey","currentKey","loadUsers","JSON","parse","localStorage","getItem","saveUsers","users","setItem","stringify","register","username","password","some","u","Error","isAdmin","toLowerCase","push","login","user","find","logout","removeItem","navigate","getCurrentUser","data","getAllUsers","i0","ɵɵinject","i1","Router","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Attila\\mkoneymanagerapp\\MoneyManagerApp\\frontend\\money-manager\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nexport interface User {\r\n  username: string;\r\n  password: string;\r\n  isAdmin?: boolean;\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthService {\r\n  private storageKey = 'users';\r\n  private currentKey = 'currentUser';\r\n\r\n  constructor(private router: Router) {}\r\n\r\n  private loadUsers(): User[] {\r\n    return JSON.parse(localStorage.getItem(this.storageKey) || '[]');\r\n  }\r\n\r\n  private saveUsers(users: User[]) {\r\n    localStorage.setItem(this.storageKey, JSON.stringify(users));\r\n  }\r\n\r\n  register(username: string, password: string) {\r\n    const users = this.loadUsers();\r\n    if (users.some(u => u.username === username)) {\r\n      throw new Error('A felhasználó már létezik!');\r\n    }\r\n\r\n    const isAdmin = username.toLowerCase() === 'admin';\r\n    users.push({ username, password, isAdmin });\r\n    this.saveUsers(users);\r\n  }\r\n\r\n  login(username: string, password: string) {\r\n    const users = this.loadUsers();\r\n    const user = users.find(u => u.username === username && u.password === password);\r\n    if (!user) throw new Error('Hibás felhasználónév vagy jelszó');\r\n    localStorage.setItem(this.currentKey, JSON.stringify(user));\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem(this.currentKey);\r\n    this.router.navigate(['/login']);\r\n  }\r\n\r\n  getCurrentUser(): User | null {\r\n    const data = localStorage.getItem(this.currentKey);\r\n    return data ? JSON.parse(data) : null;\r\n  }\r\n\r\n  isAdmin(): boolean {\r\n    const user = this.getCurrentUser();\r\n    return !!user?.isAdmin;\r\n  }\r\n\r\n  getAllUsers(): User[] {\r\n    return this.loadUsers();\r\n  }\r\n}\r\n"],"mappings":";;AAUA,WAAaA,WAAW;EAAlB,MAAOA,WAAW;IAItBC,YAAoBC,MAAc;MAAd,KAAAA,MAAM,GAANA,MAAM;MAHlB,KAAAC,UAAU,GAAG,OAAO;MACpB,KAAAC,UAAU,GAAG,aAAa;IAEG;IAE7BC,SAASA,CAAA;MACf,OAAOC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACN,UAAU,CAAC,IAAI,IAAI,CAAC;IAClE;IAEQO,SAASA,CAACC,KAAa;MAC7BH,YAAY,CAACI,OAAO,CAAC,IAAI,CAACT,UAAU,EAAEG,IAAI,CAACO,SAAS,CAACF,KAAK,CAAC,CAAC;IAC9D;IAEAG,QAAQA,CAACC,QAAgB,EAAEC,QAAgB;MACzC,MAAML,KAAK,GAAG,IAAI,CAACN,SAAS,EAAE;MAC9B,IAAIM,KAAK,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACH,QAAQ,KAAKA,QAAQ,CAAC,EAAE;QAC5C,MAAM,IAAII,KAAK,CAAC,4BAA4B,CAAC;MAC/C;MAEA,MAAMC,OAAO,GAAGL,QAAQ,CAACM,WAAW,EAAE,KAAK,OAAO;MAClDV,KAAK,CAACW,IAAI,CAAC;QAAEP,QAAQ;QAAEC,QAAQ;QAAEI;MAAO,CAAE,CAAC;MAC3C,IAAI,CAACV,SAAS,CAACC,KAAK,CAAC;IACvB;IAEAY,KAAKA,CAACR,QAAgB,EAAEC,QAAgB;MACtC,MAAML,KAAK,GAAG,IAAI,CAACN,SAAS,EAAE;MAC9B,MAAMmB,IAAI,GAAGb,KAAK,CAACc,IAAI,CAACP,CAAC,IAAIA,CAAC,CAACH,QAAQ,KAAKA,QAAQ,IAAIG,CAAC,CAACF,QAAQ,KAAKA,QAAQ,CAAC;MAChF,IAAI,CAACQ,IAAI,EAAE,MAAM,IAAIL,KAAK,CAAC,kCAAkC,CAAC;MAC9DX,YAAY,CAACI,OAAO,CAAC,IAAI,CAACR,UAAU,EAAEE,IAAI,CAACO,SAAS,CAACW,IAAI,CAAC,CAAC;IAC7D;IAEAE,MAAMA,CAAA;MACJlB,YAAY,CAACmB,UAAU,CAAC,IAAI,CAACvB,UAAU,CAAC;MACxC,IAAI,CAACF,MAAM,CAAC0B,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;IAClC;IAEAC,cAAcA,CAAA;MACZ,MAAMC,IAAI,GAAGtB,YAAY,CAACC,OAAO,CAAC,IAAI,CAACL,UAAU,CAAC;MAClD,OAAO0B,IAAI,GAAGxB,IAAI,CAACC,KAAK,CAACuB,IAAI,CAAC,GAAG,IAAI;IACvC;IAEAV,OAAOA,CAAA;MACL,MAAMI,IAAI,GAAG,IAAI,CAACK,cAAc,EAAE;MAClC,OAAO,CAAC,CAACL,IAAI,EAAEJ,OAAO;IACxB;IAEAW,WAAWA,CAAA;MACT,OAAO,IAAI,CAAC1B,SAAS,EAAE;IACzB;;;yBAjDWL,WAAW,EAAAgC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA;MAAA;IAAA;;;eAAXnC,WAAW;QAAAoC,OAAA,EAAXpC,WAAW,CAAAqC,IAAA;QAAAC,UAAA,EADE;MAAM;IAAA;;SACnBtC,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}